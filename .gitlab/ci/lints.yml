---
lint:cargo-deny:
  image: registry.gitlab.com/inko-lang/development-docker-images:cargo-deny
  stage: test
  before_script:
    - cargo --version
    - rustc --version
  script:
    - cargo deny check
  except:
    - tags

lint:clippy:
  extends:
    - .only-rust-changes
  image: registry.gitlab.com/inko-lang/development-docker-images:rust-stable
  stage: test
  before_script:
    - rustc --version
    - cargo --version
  script:
    - make clippy
  cache:
    paths:
      - .cargo
      - target
  except:
    - tags

lint:rustfmt:
  extends:
    - .only-rust-changes
  image: registry.gitlab.com/inko-lang/development-docker-images:rust-stable
  stage: test
  before_script:
    - rustc --version
    - cargo --version
    - rustfmt --version
  script:
    - make rustfmt-check
  except:
    - tags

lint:docs:
  extends:
    - .only-docs-changes
  image: registry.gitlab.com/inko-lang/development-docker-images:vale
  stage: test
  before_script:
    - vale --version
  script:
    - vale --no-wrap --sort docs/source

lint:gitlint:
  image: registry.gitlab.com/inko-lang/development-docker-images:python
  stage: test
  before_script:
    - gitlint --version
  script:
    - gitlint --commits "HEAD~$((GIT_DEPTH - 1))..HEAD"
